
# Daily

A place where I write public daily thoughts.


<h2 id="09-22-2022" ><a href="#09-22-2022">22nd September, 2022</a></h2>

There are days we spin our wheels and accomplish almost nothing. 

Today was a day I had to remind myself how to find specific files and search for certain patterns. Over time I am more and more convinced that it is better to learn the lower level commands on the CLI than to rely on any IDE feature for common search and edit file or file contents.

How do you find an apk file within your directory? 

`find . -type file -name "*.apk"`


How do you find a file that imports a module named "config" which is imported from "mobule-b"? 

Turns out "config" is quite a common word and "mobule-b" might be imported 100s of times. 

The following can do that for you:  
`rg -U 'import.*config.*mobule-b'`

The trick here is enabling multiline grep with the `-U` option.


<h2 id="09-21-2022" ><a href="#09-21-2022">21th September, 2022</a></h2>

Today was a long day. I had a nice opportunity to improve React Native's horizontal scroll view. I found an edge case where the snap to animation was very slow/sluggish. [See PR here](https://github.com/facebook/react-native/pull/34756).

This was part of yesterday's work and why I had to run my app by compiling react-native's source.

I wrote a [TIL about git diff's file filtering feature](/posts/2022-09-21/til-git-diff-file-filter).

<h2 id="09-20-2022" ><a href="#09-20-2022">20th September, 2022</a></h2>

Today I had to patch react-native's source code to fix an Android issue.

Turns out by default react-native only compiles its native code when the new Fabric architecture is enabled else it uses a prebuilt lib.

To turn on compilation of react-native's source code you need to remove the following if checks in [build.gradle](https://github.com/facebook/react-native/blob/bcb58089c4723a005326cb7a8b44e349c6a9a451/template/android/app/build.gradle) and [settings.gradle](https://github.com/facebook/react-native/blob/bcb58089c4723a005326cb7a8b44e349c6a9a451/template/android/settings.gradle):

```gradle
M src/packages/app/android/app/build.gradle
@@ -423,7 +423,7 @@ dependencies {
     implementation 'com.google.android.play:core:1.8.0'
 }
 
-if (isNewArchitectureEnabled()) {
+// if (isNewArchitectureEnabled()) {
     // If new architecture is enabled, we let you build RN from source
     // Otherwise we fallback to a prebuilt .aar bundled in the NPM package.
     // This will be applied to all the imported transtitive dependency.
@@ -437,7 +437,7 @@ if (isNewArchitectureEnabled()) {
             //         .because("On New Architecture we're building Hermes from source")
         }
     }
-}
+// }
 
 apply from: file("$nodeModulesPath/@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesAppBuildGradle(project)
```


```gradle
M src/packages/app/android/settings.gradle
@@ -7,11 +7,12 @@ apply from: file("$nodeModulesPath/@react-native-community/cli-platform-android/
 include ':app'
 includeBuild("$nodeModulesPath/react-native-gradle-plugin")
 
+include(":ReactAndroid")
+project(":ReactAndroid").projectDir = file("$nodeModulesPath/react-native/ReactAndroid")
+
 if (settings.hasProperty("newArchEnabled") && settings.newArchEnabled == "true") {
-    include(":ReactAndroid")
-    project(":ReactAndroid").projectDir = file("$nodeModulesPath/react-native/ReactAndroid")
-    include(":ReactAndroid:hermes-engine")
-    project(":ReactAndroid:hermes-engine").projectDir = file("$nodeModulesPath/react-native/ReactAndroid/hermes-engine")
+	include(":ReactAndroid:hermes-engine")
+	project(":ReactAndroid:hermes-engine").projectDir = file("$nodeModulesPath/react-native/ReactAndroid/hermes-engine")
 }
```


Once I compiled its source code I could debug it with Android Studio and find where to fix the issue. I'll post about the issue on another day.


<h2 id="09-19-2022" ><a href="#09-19-2022">19th September, 2022</a></h2>

Hello world. It was on my TODO list that I was going to get this done. So, I'm done = ).

But, here are some random thoughts:


**1) There are no reliable dev environments in the finance industry**

I've been working in the Crypto space for a year now and this is a huge pain point for us. Researching about the topic I learned it is a shared pain due to the number of external integrations with legacy bank systems. Plus, it is hard to maintain fakers for every API you have. 

**2) Handling app errors gracefully**

This has been a recorrent topic at work. The app grew and an initial pattern implemented in the early days of the app is becoming bad user experience - full screen errors. 

Over the years I noticed a few patterns emerge while building apps. The first is fully neglecting errors and letting apps just crash. The second pattern is typically a solution for the first which is a generic error screen that serves as a catch all, this is the stage where the current app I work with is at. And perhaps the last stage is pushing error handling closer to the leaf UI elements that cause them in the UI tree with addition to proper reaction mechanisms such as retries.


In hingsight it feels like if we instead started backwards - that is handling errors only at the leaf nodes before going higher up the UI tree, this could make it easier over time to deliver a better UX.

But why doesn't that happen? 

I don't know the answer. But, I would think that the clear lack of paved road in this area makes for less experienced developers to simply neglect error handling as a whole.




